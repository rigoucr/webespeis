<html><body><p>All Linux distributions are constantly updating the versions of the packages in their archives. That’s what makes them great, lots of people working in a distributed way to let you easily update your software and get the latest features or critical bug fixes.</p>
<p>And you should constatly update your operating system. Otherwise you’ll become an easy target for criminals exploiting known vulnerabilities.</p>
<p>The problem, at least for me, is that I have many many Ubuntu machines in the house and my badwidth is really bad. So keeping all my real machines, virtual machines and various devices up-to-date every day has become a slow problem.</p>
<p>The solution is to cache the downloaded deb packages. So only one machine has to make the downloads from the internet, and they will be kept in my local network to make much faster to get the packages in the other machines.</p>
<p>So let me introduce you to <a href="https://www.unix-ag.uni-kl.de/~bloch/acng/">Apt-Cacher NG</a>.</p>
<p>Setting it up is simple. First, choose a machine to run the cacher and store the packages. Ideally, this machine should be running all the time, and should have a good amount of storage space. I’m using my desktop as the cacher; but as soon as I update my router to one that runs Ubuntu, I will make that one the cacher.</p>
<p>On that machine, install apt-cacher-ng:</p>
<pre><code>  sudo apt install apt-cacher-ng</code></pre>
<p>And that’s it. The cacher is installed and configured. Now we need the name of this machine to use it on the other ones:</p>
<pre><code>  $ hostname
  calchas</code></pre>
<p>In this example, <em>calchas</em> is the name of the machine I’m using as the cacher. Take note of the name of your machine, and now, in all the other machines:</p>
<pre><code>  $ sudo gedit /etc/apt/apt.conf.d/02proxy</code></pre>
<p>That will create a new empty configuration file for <em>apt</em>, and open it to be edited with <em>gedit</em>, the default graphical editor in Ubuntu. In the editor, write this:</p>
<pre><code>  Acquire::http::proxy "http://calchas.lan:3142";</code></pre>
<p>replacing <em>calchas</em> with the name of your cacher machine, collected above. The <em>.lan</em> part is really only needed when you are setting it up in a virtual machine and the host is the same as the cacher, but it doesn’t hurt to add it on real machines. That number, <em>3142</em>, is the network port where the caching service is running, leave it unchanged.</p>
<p>After that, the first time you update a package in your network it will be slow just as before. But all the other machines updating the same package will be very fast. I have to thank <em>apt-cacher-ng</em> for saving me many hours during my updates of the past years.</p>
<div class="references">

</div></body></html>